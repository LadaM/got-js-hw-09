{"version":3,"file":"commonHelpers2.js","sources":["../src/js/02-timer.js"],"sourcesContent":["'use strict';\nimport flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport Notiflix from 'notiflix';\n\nconst date_time_picker = flatpickr('#datetime-picker', {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    if (selectedDates[0] < new Date()) {\n      try {\n        Notiflix.Notify.failure('Please choose a date in the future');\n      } catch (error) {\n        console.log(error);\n        window.alert('Please choose a date in the future');\n      }\n    } else {\n      startButton.removeAttribute('disabled');\n    }\n  },\n  onOpen() {\n    this.setDate(new Date());\n  },\n});\n\nconst startButton = document.querySelector('[data-start]');\nconst days_countdown = document.querySelector('span[data-days]');\nconst hours_countdown = document.querySelector('span[data-hours]');\nconst minutes_countdown = document.querySelector('span[data-minutes]');\nconst seconds_countdown = document.querySelector('span[data-seconds]');\n\nlet interval;\nlet intervalCleared = false;\n\nfunction convertMs(timeDifference) {\n  const minute_in_ms = 1000 * 60;\n  const hour_in_ms = minute_in_ms * 60;\n  const day_in_ms = hour_in_ms * 24;\n\n  return {\n    days: Math.floor(timeDifference / day_in_ms),\n    hours: Math.floor((timeDifference % day_in_ms) / hour_in_ms),\n    minutes: Math.floor((timeDifference % hour_in_ms) / minute_in_ms),\n    seconds: Math.floor((timeDifference % minute_in_ms) / 1000),\n  };\n}\n\nfunction addLeadingZero(value) {\n  return value.padStart(2, '0');\n}\n\nfunction setTimer() {\n  const now = new Date();\n  const futureDate = new Date(date_time_picker.selectedDates[0]);\n  const timeDifference = futureDate - now;\n  if (now < futureDate) {\n    const { days, hours, minutes, seconds } = convertMs(timeDifference);\n    days_countdown.textContent = addLeadingZero(days.toString());\n    hours_countdown.textContent = addLeadingZero(hours.toString());\n    minutes_countdown.textContent = addLeadingZero(minutes.toString());\n    seconds_countdown.textContent = addLeadingZero(seconds.toString());\n  } else {\n    if (!intervalCleared) {\n      clearInterval(interval);\n      intervalCleared = true;\n      // Notiflix.Notify.success('Time is up!');\n      startButton.setAttribute('disabled', 'true');\n    }\n  }\n}\n\nstartButton.addEventListener('click', () => {\n  intervalCleared = false;\n  setTimer();\n  interval = setInterval(() => setTimer(), 1000);\n});\n"],"names":["date_time_picker","flatpickr","selectedDates","Notiflix","error","startButton","days_countdown","hours_countdown","minutes_countdown","seconds_countdown","interval","intervalCleared","convertMs","timeDifference","addLeadingZero","value","setTimer","now","futureDate","days","hours","minutes","seconds"],"mappings":"+IAKA,MAAMA,EAAmBC,EAAU,mBAAoB,CACrD,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrB,GAAIA,EAAc,CAAC,EAAI,IAAI,KACzB,GAAI,CACFC,EAAS,OAAO,QAAQ,oCAAoC,CAC7D,OAAQC,EAAO,CACd,QAAQ,IAAIA,CAAK,EACjB,OAAO,MAAM,oCAAoC,CAClD,MAEDC,EAAY,gBAAgB,UAAU,CAEzC,EACD,QAAS,CACP,KAAK,QAAQ,IAAI,IAAM,CACxB,CACH,CAAC,EAEKA,EAAc,SAAS,cAAc,cAAc,EACnDC,EAAiB,SAAS,cAAc,iBAAiB,EACzDC,EAAkB,SAAS,cAAc,kBAAkB,EAC3DC,EAAoB,SAAS,cAAc,oBAAoB,EAC/DC,EAAoB,SAAS,cAAc,oBAAoB,EAErE,IAAIC,EACAC,EAAkB,GAEtB,SAASC,EAAUC,EAAgB,CAKjC,MAAO,CACL,KAAM,KAAK,MAAMA,EAAiB,KAAS,EAC3C,MAAO,KAAK,MAAOA,EAAiB,MAAa,IAAU,EAC3D,QAAS,KAAK,MAAOA,EAAiB,KAAc,GAAY,EAChE,QAAS,KAAK,MAAOA,EAAiB,IAAgB,GAAI,CAC9D,CACA,CAEA,SAASC,EAAeC,EAAO,CAC7B,OAAOA,EAAM,SAAS,EAAG,GAAG,CAC9B,CAEA,SAASC,GAAW,CAClB,MAAMC,EAAM,IAAI,KACVC,EAAa,IAAI,KAAKlB,EAAiB,cAAc,CAAC,CAAC,EACvDa,EAAiBK,EAAaD,EACpC,GAAIA,EAAMC,EAAY,CACpB,KAAM,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYV,EAAUC,CAAc,EAClEP,EAAe,YAAcQ,EAAeK,EAAK,SAAU,CAAA,EAC3DZ,EAAgB,YAAcO,EAAeM,EAAM,SAAU,CAAA,EAC7DZ,EAAkB,YAAcM,EAAeO,EAAQ,SAAU,CAAA,EACjEZ,EAAkB,YAAcK,EAAeQ,EAAQ,SAAU,CAAA,CACrE,MACSX,IACH,cAAcD,CAAQ,EACtBC,EAAkB,GAElBN,EAAY,aAAa,WAAY,MAAM,EAGjD,CAEAA,EAAY,iBAAiB,QAAS,IAAM,CAC1CM,EAAkB,GAClBK,IACAN,EAAW,YAAY,IAAMM,EAAU,EAAE,GAAI,CAC/C,CAAC"}